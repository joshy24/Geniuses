myApp.directive("examResult",["service","responseReview","storageService",function(t,e,n){return{restrict:"E",scope:{result:"="},controller:["$scope",function(i){function l(t){var e;return e=1==t?!1:!0}function d(t,e){return t.indexOf(e)>=0}i.gen=!1,i.fb=!1,i.exam_type_no_year=i.result.exam_type_no_year,i.subject=i.result.subject,i.exam_type=i.result.exam_type,i.mode=i.result.mode,i.attempted=i.result.attempted,i.correct=i.result.correct,i.incorrect=i.result.incorrect,i.percent_score=i.result.percent_score,i.total_question_count=i.correct+i.incorrect;var o="I scored "+i.correct+"/"+i.total_question_count+" in a "+i.exam_type+" "+i.subject+" exam on Geniuses.",s="Geniuses has helped me prepare for my upcoming "+i.exam_type_no_year+" exam.",c=" Geniuses has helped me improve my knowledge of "+i.subject,a="Geniuses is really cool.",u=[o,s,c,a];i.selected_message=u[0],i.shareScore=function(){$("#shareModal").modal("show"),$("#msgs-div").hide(),i.selected_message=u[0]},i.showMsgs=function(t){switch($("#msgs-div").show(),t){case"f":i.fb=l(i.fb);break;case"g":i.gen=l(i.gen)}},i.setMessage=function(t){i.selected_message=u[t]},i.share=function(){""!=i.selected_message&&(1==i.gen&&t.setDiscussion(i.selected_message)&&t.send().then(function(t){if(1==e.check(t.data)&&200==t.status)if(0!=t.data.data){var o=n.getStorageValue("posts");d(JSON.stringify(t.data.data),"postid")&&(0!=o?(o.splice(0,0,t.data.data),n.setStorageValue("posts",o)):(o=t.data.data,n.setStorageValue("posts",o)),$("#shareModal").modal("hide"),i.message="The message was successfully posted on your timeline.",$("#messageModal").modal("show"))}else r();else r()},function(t){r()}),1==i.fb)};var r=function(){$("#shareModal").modal("hide"),i.message="Ooops...the message was NOT successfully posted on your timeline.",$("#messageModal").modal("show")}}],templateUrl:"templates/result.html"}}]);