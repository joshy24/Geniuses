myApp.directive("postItem",["$compile","$state","$sce","service","responseReview","singlePost","postChange","storageService","authService",function(e,t,n,i,o,s,a,c,l){function w(e,t){return e.indexOf(t)>=0}var r="",u="",d="",m="",f='<div class="col-xs-12 col-md-12"><h5 ng-hide="is_image_question" class="post-info-text" ng-bind-html="getHtml(question)" id="question-text"></h5><img ng-show="is_image_question" class="timeline-image-question" ng-src="{{image_question}}"></div><div class="col-xs-12 col-md-12"><img class="pull-right" ng-src="images/SSCE/{{subject_name}}/Images/{{question_image}}" id="question-image"></div>',p='<div class="col-xs-12 col-md-12"> <h5 ng-hide="is_image_question" class="post-info-text" ng-bind-html="getHtml(question)" id="question-text"></h5><img ng-show="is_image_question" class="timeline-image-question" ng-src="{{image_question}}"></div>',g="",_=function(){d='<div class="allcomments"><div ng-repeat="comment in comments track by $index"><div class="container-fluid"><div class="row comment-info-div col-xs-12 col-md-12"><a ng-click="showProfile(comment.user_id)"><img class="pull-left img-circle" ng-src="{{comment.picture_url}}" id="owner-image" height="40" width="40"></a><div class="row"><a ng-click="showProfile(comment.user_id)"><h5 class="capitalize post-info-text pull-left" id="owner-name"><b>{{comment.firstname}}  {{comment.lastname}}</b></h5></a><h5 class="capitalize post-info-text" id="post-date">{{comment.created}}</h5></div> </div><div class="row"><div ng-hide="isEdittedClicked && comment.user_id==user_id && current_editted_id==$index" class="col-xs-12 col-md-12"><h5 class="post-info-text" id="comment-text"><b>{{comment.comment}}</b></h5> </div> <div ng-show="isEdittedClicked && comment.user_id==user_id && current_editted_id==$index" class="col-xs-11 col-md-11"><textarea class="post-info-text edit-text" ng-model="edited_comment">{{edited_comment}}</textarea></div><div ng-show="!isEdittedClicked && comment.user_id==user_id" class="col-xs-12 col-md-12"><button ng-click="setEdittedClicked(true, comment.comment, $index)" class="abtn"><img src="img/edit.png" height="30" width="30"> edit</button></div><div ng-show="isEdittedClicked && comment.user_id==user_id &&  current_editted_id==$index" class="col-xs-12 col-md-12"><div id="edit-buttons-div"><button ng-click="submitEditted(edited_comment, comment.comment_id)" class="abtn"><img src="img/post.png" height="30px" width="30px"> submit</button> <button class="abtn" ng-click="unsetEdittedClicked()"><img src="img/close.png" height="30px" width="30px"> cancel</button></div></div></div></div></div><div class="col-md-12 col-xs-12 col-sm-12 show-all-comments-btn-div"><button ng-click="showThisPost()" id="show-all-comments-btn"><img src="img/expand.png" height="30" width="30"> view all comments</button></div></div>'},v=function(e,t){var n="";return null!=e&&0!=e?n='<div class="post"><div class="container-fluid"><div class="row post-owner-info-div"><h5 class="text-center">posted by <img ng-src="{{owner_image}}" height="40" width="40" class="img-circle"> <b>{{owner_name}}</b> on {{created}}</h5></div><div class="row subject-info-div"><img class="pull-left" ng-src="{{subject_img}}" id="subject-image" height="40" width="40"><div class="row"><h3 style="color:{{subject_color}};" class="post-info-text" id="subject-name"><b>{{subject_name}}</b></h3></div> </div><div class="row">'+g+'</div><div class="row options-info-div"><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionA)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionB)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionC)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionD)" class="question-option"></h5></div></div> <div class="row explanation-info-div col-md-12"> <img class="pull-left img-circle" ng-src="{{llh_img}}" id="llh-image" height="35" width="35"> <div class="row">  <h5 class="post-info-text" id="llh-name"><b>Explanation by Team Geniuses</b></h5> </div>   </div> <div class="row"> <div class="col-xs-11 col-md-12 explanation-content-div">'+r+'</div>  </div> <div class="row"> <div class="question-interaction-div col-md-12 col-xs-12"><div class="single-interaction"><button data-toggle="tooltip" title="click if explanation was helpful" ng-click="incrementHelpful()" class="text-center"><img src="{{helpful_img}}" height="25" width="25"> like</button><h6 class="text-center">{{helpful_count}}</h6></div><div class="single-interaction"><button data-toggle="tooltip" title="click to share this post" ng-click="incrementShare()" class="text-center"><img src="img/share-two.png" height="25" width="25"> share</button><h6 class="text-center">{{share_count}}</h6></div><div class="single-interaction"><h5 class="text-center" data-toggle="tooltip" title="number of times this post has been viewed"><img src="img/views.png" height="25" width="25"> views</h5><h6 class="text-center">{{views_count}}</h6></div><div class="single-interaction"><h5 data-toggle="tooltip" title="total number of comments on this post" class="text-center"><img src="img/comment.png" height="25" width="25"> comments</h5><h6 class="text-center">{{comment_count}}</h6></div></div></div> </div> </div><div class="user-comment-div"><div class="container-fluid"><div class="row user-info-div col-md-12"><a ng-click="showProfile(user_id)"><img class="pull-left img-circle" ng-src="{{user_img}}" id="user-image" height="40" width="40"></a><div class="row"><h5 class="capitalize post-info-text" id="user-name"><b>{{user_name}}</b></h5></div> </div><div class="row"><div class="col-xs-10 col-md-11 post-comment-div"><textarea class="post-info-text" placeholder="comment on this post" id="user-comment-text" ng-model="acomment">{{acomment}}</textarea></div> <div class="col-md-12 col-xs-12"><button ng-click="makeComment()" id="post-btn"><img src="img/post.png" height="30" width="30"> post</button></div> </div>  </div></div>'+d:null!=t&&0!=t&&(n='<div class="discussion-post-div"><div class="container-fluid"><div class="row post-owner-info-div"><h5 class="text-center">posted by <img ng-src="{{owner_image}}" height="40" width="40" class="img-circle"> <b>{{owner_name}}</b> on {{created}}</h5></div><div class="row"><div ng-show="!isEditClicked" class="col-xs-12 col-md-11"><h5 class="post-info-text" id="discussion-comment-text"><b>{{discussion}}</b></h5></div> <div ng-show="isEditClicked" class="col-xs-11 col-md-11"><textarea class="post-info-text edit-text" ng-model="editted_discussion">{{discussion}}</textarea>        </div><div ng-show="!isEditClicked && discussion_user_id == user_id" class="col-xs-12 col-md-12"><button ng-click="setEditClicked(discussion)" class="abtn"><img src="img/edit.png" height="30" width="30"> edit</button></div><div ng-show="isEditClicked" class="col-xs-12 col-md-12"><div id="edit-buttons-div"><button ng-click="submitEdit(editted_discussion, discussion_id)" class="abtn"><img src="img/post.png" height="30px" width="30px"> submit</button> <button class="abtn" ng-click="unsetEditClicked()"><img src="img/close.png" height="30px" width="30px"> cancel</button></div></div> </div> </div></div> <div class="user-comment-div"><div class="container-fluid"><div class="row user-info-div col-md-12"><a ng-click="showProfile(user_id)"><img class="pull-left img-circle" ng-src="{{user_img}}" id="user-image" height="40" width="40"></a><div class="row"><h5 class="capitalize post-info-text" id="user-name"><b>{{user_name}}</b></h5></div> </div><div class="row"><div class="col-xs-10 col-md-11 post-comment-div"><textarea class="post-info-text" placeholder="comment on this post" id="user-comment-text" ng-model="acomment">{{acomment}}</textarea></div> <div class="col-md-12 col-xs-12"><button ng-click="makeComment()" id="post-btn"><img src="img/post.png" height="30" width="30"> post</button></div></div></div></div>'+d),n},q=function(){r=u+'<button class="learn-more-btn" ng-click="showThisPost()">learn more</button>'},b=function(e){return e!==!1&&void 0!==e&&null!==e&&""!==e?!0:!1},x=function(s,r,h,x){function j(){if(s.content){if($.isEmptyObject(s.content.comments)===!1){s.comments=[];var t=0;1===s.content.comments.length&&(t=1),s.content.comments.length>=2&&(t=2);for(var n=0;t>n;n++){b(s.content.comments_user_info[n].picture_url)===!1?s.content.comments_user_info[n].picture_url="img/default.png":s.content.comments[n].user_id===k.id&&(s.content.comments_user_info[n].picture_url=k.picture_url);var i=$.extend(s.content.comments[n],s.content.comments_user_info[n]);s.comments.push(i)}_()}else d="";null!=s.content.question&&""!==s.content.question&&(1==s.content.user_question_help.status?s.helpful_img="img/helpful.png":s.helpful_img="img/upvote.png",null!==s.content.question_interaction&&""!==s.content.question_interaction?(s.helpful_count=parseInt(s.content.question_interaction.helpful_count),s.share_count=parseInt(s.content.question_interaction.share_count),s.views_count=parseInt(s.content.question_interaction.views_count),s.comment_count=parseInt(s.content.question_interaction.comment_count)):(s.helpful_count=0,s.share_count=0,s.views_count=0,s.comment_count=0),null!==s.content.subject.icon_url&&""!==s.content.subject.icon_url&&(s.subject_img=s.content.subject.icon_url),null!==s.content.subject.name&&""!==s.content.subject.name&&(s.subject_name=s.content.subject.name),s.content.question.question&&(w(s.content.question.question,".png")?(s.image_question="images/SSCE/"+s.subject_name+"/QuestionImages"+s.content.question.question,s.is_image_question=!0):(s.is_image_question=!1,w(s.content.question.question,"?")?s.question="<b>"+s.content.question.question+" </b>":s.question="<b>"+s.content.question.question+"? </b>")),null!==s.content.question.optionA&&""!==s.content.question.optionA&&(s.optionA="<b>A.</b> "+s.content.question.optionA),null!==s.content.question.optionB&&""!==s.content.question.optionB&&(s.optionB="<b>B.</b> "+s.content.question.optionB),null!==s.content.question.optionC&&""!==s.content.question.optionC&&(s.optionC="<b>C.</b> "+s.content.question.optionC),null!==s.content.question.optionD&&""!==s.content.question.optionD&&(s.optionD="<b>D.</b> "+s.content.question.optionD),null!==s.content.question.explanation&&""!==s.content.question.explanation&&(w(s.content.question.explanation,".png")?(u="",q()):(s.content.question.explanation.length>60?s.explanation="<b>"+s.content.question.explanation.substring(0,55)+"....":s.explanation=s.content.question.explanation+"</b>",u='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',q())),s.subject_color="rgb("+s.content.subject.color+")"),null!==s.content.question.image&&""!==s.content.question.image?(g=f,s.question_image=s.content.question.image):g=p,""!==s.content.discussion&&null!=s.content.discussion&&(s.discussion=s.content.discussion.discussion,s.discussion_id=s.content.discussion.discussion_id,s.discussion_user_id=s.content.discussion.user_id),m=l.getUser(),m.picture_url?s.user_img=m.picture_url:s.user_img="img/default.png",s.user_name=m.firstname+" "+m.lastname,s.user_id=m.id,s.user_comment="",void 0!==s.content.owner&&(1===s.content.owner?(s.owner_image=s.llh_img,s.owner_name="Team Geniuses"):(s.content.owner.picture_url?s.content.owner.id===m.id?s.owner_image=s.user_img:s.owner_image=s.content.owner.picture_url:s.owner_image="img/default.png",s.owner_name=s.content.owner.firstname+" "+s.content.owner.lastname),s.created=s.content.datecreated),r.html(v(s.content.question,s.content.discussion)),e(r.contents())(s)}}s.acomment="",s.helpful_count=0,s.share_count=0;var k=l.getUser(),C=!1;s.llh_img="img/GeniusesLogo.png",s.showProfile=function(e){t.go("user",{id:e})};var y=function(){var e=c.getStorageValue("posts");e[s.index].question_interaction.share_count=parseInt(e[s.index].question_interaction.share_count)+1,c.setStorageValue("posts",[]),c.setStorageValue("posts",e)},S=function(){var e=c.getStorageValue("posts");e[s.index].question_interaction.views_count=parseInt(e[s.index].question_interaction.views_count)+1,c.setStorageValue("posts",[]),c.setStorageValue("posts",e)},I=function(){i.setViewCount(s.content.postid),i.send().then(function(e){o.check(e.data)&&(e.data.data===!1?(s.views_count-=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)-1):e.data.data===!0&&S())},function(e){s.views_count-=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)-1})},E=function(){var e=c.getStorageValue("posts");e[s.index].question_interaction.helpful_count=parseInt(e[s.index].question_interaction.helpful_count)+1,e[s.index].user_question_help.status=1,c.setStorageValue("posts",[]),c.setStorageValue("posts",e)};s.incrementHelpful=function(){var e=s.content.user_question_help.status;1==e||e===!0||(s.helpful_count+=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)+1,s.content.user_question_help.status=1,s.helpful_img="img/helpful.png",i.setHelpful(s.content.postid,"I"),i.send().then(function(e){o.check(e.data)&&(e.data.data===!1&&(s.helpful_count-=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)-1,s.content.user_question_help.status=0,s.helpful_img="img/upvote.png"),e.data.data===!0&&E())},function(e){s.helpful_count-=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)-1,s.content.user_question_help.status=0,s.helpful_img="img/upvote.png"}))},s.incrementShare=function(){s.share_count+=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)+1,s.showshare({pid:s.content.postid,subject:s.content.question.subject,question:s.content.question.question}),i.setShareCount(s.content.postid),i.send().then(function(e){o.check(e.data)&&(e.data.data===!1&&(s.share_count-=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)-1),e.data.data===!0&&y())},function(e){s.share_count-=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)-1})},s.current_editted_id=-1,s.isEdittedClicked=!1,s.edited_comment="",s.setEdittedClicked=function(e,t,n){s.current_editted_id=n,s.edited_comment=t,s.isEdittedClicked=e},s.unsetEdittedClicked=function(){s.current_editted_id=-1,s.edited_comment="",s.isEdittedClicked=!1},s.submitEditted=function(e,t){e!=s.content.comments[s.current_editted_id].comment&&i.setEditComment(t,e)&&i.send().then(function(t){o.check(t.data)===!0&&t.data.data===!0&&(s.content.comments[s.current_editted_id].comment=e,j())},function(e){})["finally"](function(){s.current_editted_id=-1,s.edited_comment="",s.isEdittedClicked=!1})},s.isEditClicked=!1,s.editted_discussion="",s.setEditClicked=function(e){s.isEditClicked=!0,s.editted_discussion=e},s.unsetEditClicked=function(){s.isEditClicked=!1,s.editted_discussion=""},s.submitEdit=function(e,t){e!=s.content.discussion.discussion&&i.setEditDiscussion(t,e)&&i.send().then(function(t){o.check(t.data)===!0&&t.data.data===!0&&(s.content.discussion.discussion=e,j())},function(e){})["finally"](function(){s.isEditClicked=!1,s.editted_discussion=""})},s.makeComment=function(){var e=s.content.postid,n=null,a="";1==s.content.owner?(n=1,a="L"):(n=s.content.owner.id,a="S");var r="S",u=s.acomment;l.isLoggedIn()===!0?s.acomment&&C===!1&&(s.comment_count+=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)+1,i.setmakeComment(e,n,a,r,u)&&(C=!0,i.send().then(function(e){if(e.data.data&&o.check(e.data)===!0){s.content.comments?s.content.comments.splice(0,0,e.data.data):s.content.comments[0]=e.data.data,null!=s.content.comments_user_info?s.content.comments_user_info.splice(0,0,{firstname:k.firstname,lastname:k.lastname,picture_url:k.picture_url}):(s.content.comments_user_info=new Array,s.content.comments_user_info[0]={firstname:k.firstname,lastname:k.lastname,picture_url:k.picture_url});var t=c.getStorageValue("posts");t[s.index].comments=[],t[s.index].comments_user_info=[],t[s.index].comments=s.content.comments,t[s.index].comments_user_info=s.content.comments_user_info,c.setStorageValue("posts",[]),c.setStorageValue("posts",t),j(),s.acomment=""}else s.comment_count-=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)-1;C=!1},function(e){s.comment_count-=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)-1,C=!1}))):t.go("login")},s.showThisPost=function(){s.views_count+=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)+1,a.sendData(s.content,s.index,"Single"),s.showpost({id:s.index}),I()},s.getHtml=function(e){return n.trustAsHtml(e)},s.$watch("content",function(){if(s.content){var t=l.getUser();if($.isEmptyObject(s.content.comments)===!1){s.comments=[];var n=0;1==s.content.comments.length&&(n=1),s.content.comments.length>=2&&(n=2);for(var i=0;n>i;i++){b(s.content.comments_user_info[i].picture_url)===!1?s.content.comments_user_info[i].picture_url="img/default.png":s.content.comments[i].user_id===t.id&&(s.content.comments_user_info[i].picture_url=t.picture_url);var o=$.extend(s.content.comments[i],s.content.comments_user_info[i]);s.comments.push(o)}_()}else d="";null!=s.content.question&&""!=s.content.question&&(1==s.content.user_question_help.status?s.helpful_img="img/helpful.png":s.helpful_img="img/upvote.png",null!=s.content.question_interaction&&""!=s.content.question_interaction?(s.helpful_count=parseInt(s.content.question_interaction.helpful_count),s.share_count=parseInt(s.content.question_interaction.share_count),s.views_count=parseInt(s.content.question_interaction.views_count),s.comment_count=parseInt(s.content.question_interaction.comment_count)):(s.helpful_count=0,s.share_count=0,s.views_count=0,s.comment_count=0),null!=s.content.subject.icon_url&&""!=s.content.subject.icon_url&&(s.subject_img=s.content.subject.icon_url),null!=s.content.subject.name&&""!=s.content.subject.name&&(s.subject_name=s.content.subject.name),s.content.question.question&&(w(s.content.question.question,".png")?(s.image_question="images/SSCE/"+s.subject_name+"/QuestionImages"+s.content.question.question,s.is_image_question=!0):(s.is_image_question=!1,w(s.content.question.question,"?")?s.question="<b>"+s.content.question.question+" </b>":s.question="<b>"+s.content.question.question+"? </b>")),null!=s.content.question.optionA&&""!=s.content.question.optionA&&(s.optionA="<b>A.</b> "+s.content.question.optionA),null!=s.content.question.optionB&&""!=s.content.question.optionB&&(s.optionB="<b>B.</b> "+s.content.question.optionB),null!=s.content.question.optionC&&""!=s.content.question.optionC&&(s.optionC="<b>C.</b> "+s.content.question.optionC),null!=s.content.question.optionD&&""!=s.content.question.optionD&&(s.optionD="<b>D.</b> "+s.content.question.optionD),null!=s.content.question.explanation&&""!=s.content.question.explanation&&(w(s.content.question.explanation,".png")?(u="",q()):(s.content.question.explanation.length>60?s.explanation="<b>"+s.content.question.explanation.substring(0,55)+"....":s.explanation=s.content.question.explanation+"</b>",u='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',q())),s.subject_color="rgb("+s.content.subject.color+")"),b(s.content.question.image)?(g=f,s.question_image=s.content.question.image):g=p,""!=s.content.discussion&&null!=s.content.discussion&&(s.discussion=s.content.discussion.discussion,s.discussion_id=s.content.discussion.discussion_id,s.discussion_user_id=s.content.discussion.user_id),m=l.getUser(),m.picture_url?s.user_img=m.picture_url:s.user_img="img/default.png",s.user_name=m.firstname+" "+m.lastname,s.user_id=m.id,s.user_comment="",void 0!=s.content.owner&&(1==s.content.owner?(s.owner_image=s.llh_img,s.owner_name="Team Geniuses"):(s.content.owner.picture_url?s.content.owner.id==m.id?s.owner_image=s.user_img:s.owner_image=s.content.owner.picture_url:s.owner_image="img/default.png",s.owner_name=s.content.owner.firstname+" "+s.content.owner.lastname),s.created=s.content.datecreated);var a=v(s.content.question,s.content.discussion);r.html(a),e(r.contents())(s)}})};return{restrict:"EAC",link:x,scope:{content:"=",showpost:"&",index:"@",showshare:"&"},controller:["$scope","$element",function(t,n){t.$on("postchange",function(){if(t.index==a.getId()&&"All"==a.getTo()){var i=c.getStorageValue("posts");t.content=i[t.index];var o=l.getUser();if($.isEmptyObject(t.content.comments)===!1){t.comments=[];var s=0;1==t.content.comments.length&&(s=1),t.content.comments.length>=2&&(s=2);for(var r=0;s>r;r++){b(t.content.comments_user_info[r].picture_url)===!1?t.content.comments_user_info[r].picture_url="img/default.png":t.content.comments[r].user_id==o.id&&(t.content.comments_user_info[r].picture_url=o.picture_url);var h=$.extend(t.content.comments[r],t.content.comments_user_info[r]);t.comments.push(h)}_()}else d="";null!=t.content.question&&""!=t.content.question&&(1==t.content.user_question_help.status?t.helpful_img="img/helpful.png":t.helpful_img="img/upvote.png",null!=t.content.question_interaction&&""!=t.content.question_interaction?(t.helpful_count=parseInt(t.content.question_interaction.helpful_count),t.share_count=parseInt(t.content.question_interaction.share_count),t.views_count=parseInt(t.content.question_interaction.views_count),t.comment_count=parseInt(t.content.question_interaction.comment_count)):(t.helpful_count=0,t.share_count=0,t.views_count=0,t.comment_count=0),null!=t.content.subject.icon_url&&""!=t.content.subject.icon_url&&(t.subject_img=t.content.subject.icon_url),null!=t.content.subject.name&&""!=t.content.subject.name&&(t.subject_name=t.content.subject.name),t.content.question.question&&(w(t.content.question.question,".png")?(t.image_question="images/SSCE/"+t.subject_name+"/QuestionImages"+t.content.question.question,t.is_image_question=!0):(t.is_image_question=!1,w(t.content.question.question,"?")?t.question="<b>"+t.content.question.question+" </b>":t.question="<b>"+t.content.question.question+"? </b>")),null!=t.content.question.optionA&&""!=t.content.question.optionA&&(t.optionA="<b>A.</b> "+t.content.question.optionA),null!=t.content.question.optionB&&""!=t.content.question.optionB&&(t.optionB="<b>B.</b> "+t.content.question.optionB),null!=t.content.question.optionC&&""!=t.content.question.optionC&&(t.optionC="<b>C.</b> "+t.content.question.optionC),null!=t.content.question.optionD&&""!=t.content.question.optionD&&(t.optionD="<b>D.</b> "+t.content.question.optionD),null!=t.content.question.explanation&&""!=t.content.question.explanation&&(w(t.content.question.explanation,".png")?(u="",q()):(t.content.question.explanation.length>60?t.explanation="<b>"+t.content.question.explanation.substring(0,55)+"....":t.explanation=t.content.question.explanation+"</b>",u='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',q())),t.subject_color="rgb("+t.content.subject.color+")"),b(t.content.question.image)?(g=f,t.question_image=t.content.question.image):g=p,""!=t.content.discussion&&null!=t.content.discussion&&(t.discussion=t.content.discussion.discussion,t.discussion_id=t.content.discussion.discussion_id,t.discussion_user_id=t.content.discussion.user_id),m=l.getUser(),m.picture_url?t.user_img=m.picture_url:t.user_img="img/default.png",t.user_name=m.firstname+" "+m.lastname,t.user_id=m.id,t.user_comment="",void 0!=t.content.owner&&(1==t.content.owner?(t.owner_image=t.llh_img,t.owner_name="Team LLH"):(t.content.owner.picture_url?t.content.owner.id==m.id?t.owner_image=t.user_img:t.owner_image=t.content.owner.picture_url:t.owner_image="img/default.png",t.owner_name=t.content.owner.firstname+" "+t.content.owner.lastname),t.created=t.content.datecreated);var x=v(t.content.question,t.content.discussion);n.html(x),e(n.contents())(t)}})}]}}]);