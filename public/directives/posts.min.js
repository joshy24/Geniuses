myApp.directive("postItem",["$compile","$state","$sce","service","responseReview","singlePost","postChange","storageService","authService",function(t,e,n,i,o,s,c,u,a){function q(t,e){return t.indexOf(e)>=0}var l="",r="",d="",m="",_='<div class="col-xs-12 col-md-12"><h5 ng-hide="is_image_question" class="post-info-text" ng-bind-html="getHtml(question)" id="question-text"></h5><img ng-show="is_image_question" class="timeline-image-question" ng-src="{{image_question}}"></div><div class="col-xs-12 col-md-12"><img class="pull-right" ng-src="images/SSCE/{{subject_name}}/Images/{{question_image}}" id="question-image"></div>',p='<div class="col-xs-12 col-md-12"> <h5 ng-hide="is_image_question" class="post-info-text" ng-bind-html="getHtml(question)" id="question-text"></h5><img ng-show="is_image_question" class="timeline-image-question" ng-src="{{image_question}}"></div>',g="",h=function(){d='<div class="allcomments"><div ng-repeat="comment in comments track by $index"><div class="container-fluid"><div class="row comment-info-div col-xs-12 col-md-12"><a ng-click="showProfile(comment.user_id)"><img class="pull-left img-circle" ng-src="{{comment.picture_url}}" id="owner-image" height="40" width="40"></a><div class="row"><a ng-click="showProfile(comment.user_id)"><h5 class="capitalize post-info-text pull-left" id="owner-name"><b>{{comment.firstname}}  {{comment.lastname}}</b></h5></a><h5 class="capitalize post-info-text" id="post-date">{{comment.created}}</h5></div> </div><div class="row"><div ng-hide="isEdittedClicked && comment.user_id==user_id && current_editted_id==$index" class="col-xs-12 col-md-12"><h5 class="post-info-text" id="comment-text"><b>{{comment.comment}}</b></h5> </div> <div ng-show="isEdittedClicked && comment.user_id==user_id && current_editted_id==$index" class="col-xs-11 col-md-11"><textarea class="post-info-text edit-text" ng-model="edited_comment">{{edited_comment}}</textarea></div><div ng-show="!isEdittedClicked && comment.user_id==user_id" class="col-xs-12 col-md-12"><button ng-click="setEdittedClicked(true, comment.comment, $index)" class="abtn"><img src="img/edit.png" height="30" width="30"> edit</button></div><div ng-show="isEdittedClicked && comment.user_id==user_id &&  current_editted_id==$index" class="col-xs-12 col-md-12"><div id="edit-buttons-div"><button ng-click="submitEditted(edited_comment, comment.comment_id)" class="abtn"><img src="img/post.png" height="30px" width="30px"> submit</button> <button class="abtn" ng-click="unsetEdittedClicked()"><img src="img/close.png" height="30px" width="30px"> cancel</button></div></div></div></div></div><div class="col-md-12 col-xs-12 col-sm-12 show-all-comments-btn-div"><button ng-click="showThisPost()" id="show-all-comments-btn"><img src="img/expand.png" height="30" width="30"> view all comments</button></div></div>'},v=function(t,e){var n="";return null!=t&&0!=t?n='<div class="post"><div class="container-fluid"><div class="row post-owner-info-div"><h5 class="text-center">posted by <img ng-src="{{owner_image}}" height="40" width="40" class="img-circle"> <b>{{owner_name}}</b> on {{created}}</h5></div><div class="row subject-info-div"><img class="pull-left" ng-src="{{subject_img}}" id="subject-image" height="40" width="40"><div class="row"><h3 style="color:{{subject_color}};" class="post-info-text" id="subject-name"><b>{{subject_name}}</b></h3></div> </div><div class="row">'+g+'</div><div class="row options-info-div"><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionA)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionB)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionC)" class="question-option"></h5></div><div class="col-xs-6 col-md-6"><h5 ng-bind-html="getHtml(optionD)" class="question-option"></h5></div></div> <div class="row explanation-info-div col-md-12"> <img class="pull-left img-circle" ng-src="{{llh_img}}" id="llh-image" height="35" width="35"> <div class="row">  <h5 class="post-info-text" id="llh-name"><b>Explanation by Team Geniuses</b></h5> </div>   </div> <div class="row"> <div class="col-xs-11 col-md-12 explanation-content-div">'+l+'</div>  </div> <div class="row"> <div class="question-interaction-div col-md-12 col-xs-12"><div class="single-interaction"><button data-toggle="tooltip" title="click if explanation was helpful" ng-click="incrementHelpful()" class="text-center"><img src="{{helpful_img}}" height="25" width="25"> like</button><h6 class="text-center">{{helpful_count}}</h6></div><div class="single-interaction"><button data-toggle="tooltip" title="click to share this post" ng-click="incrementShare()" class="text-center"><img src="img/share-two.png" height="25" width="25"> share</button><h6 class="text-center">{{share_count}}</h6></div><div class="single-interaction"><h5 class="text-center" data-toggle="tooltip" title="number of times this post has been viewed"><img src="img/views.png" height="25" width="25"> views</h5><h6 class="text-center">{{views_count}}</h6></div><div class="single-interaction"><h5 data-toggle="tooltip" title="total number of comments on this post" class="text-center"><img src="img/comment.png" height="25" width="25"> comments</h5><h6 class="text-center">{{comment_count}}</h6></div></div></div> </div> </div><div class="user-comment-div"><div class="container-fluid"><div class="row user-info-div col-md-12"><a ng-click="showProfile(user_id)"><img class="pull-left img-circle" ng-src="{{user_img}}" id="user-image" height="40" width="40"></a><div class="row"><h5 class="capitalize post-info-text" id="user-name"><b>{{user_name}}</b></h5></div> </div><div class="row"><div class="col-xs-10 col-md-11 post-comment-div"><textarea class="post-info-text" placeholder="comment on this post" id="user-comment-text" ng-model="acomment">{{acomment}}</textarea></div> <div class="col-md-12 col-xs-12"><button ng-click="makeComment()" id="post-btn"><img src="img/post.png" height="30" width="30"> post</button></div> </div>  </div></div>'+d:null!=e&&0!=e&&(n='<div class="discussion-post-div"><div class="container-fluid"><div class="row post-owner-info-div"><h5 class="text-center">posted by <img ng-src="{{owner_image}}" height="40" width="40" class="img-circle"> <b>{{owner_name}}</b> on {{created}}</h5></div><div class="row"><div ng-show="!isEditClicked" class="col-xs-12 col-md-11"><h5 class="post-info-text" id="discussion-comment-text"><b>{{discussion}}</b></h5></div> <div ng-show="isEditClicked" class="col-xs-11 col-md-11"><textarea class="post-info-text edit-text" ng-model="editted_discussion">{{discussion}}</textarea>        </div><div ng-show="!isEditClicked && discussion_user_id == user_id" class="col-xs-12 col-md-12"><button ng-click="setEditClicked(discussion)" class="abtn"><img src="img/edit.png" height="30" width="30"> edit</button></div><div ng-show="isEditClicked" class="col-xs-12 col-md-12"><div id="edit-buttons-div"><button ng-click="submitEdit(editted_discussion, discussion_id)" class="abtn"><img src="img/post.png" height="30px" width="30px"> submit</button> <button class="abtn" ng-click="unsetEditClicked()"><img src="img/close.png" height="30px" width="30px"> cancel</button></div></div> </div> </div></div> <div class="user-comment-div"><div class="container-fluid"><div class="row user-info-div col-md-12"><a ng-click="showProfile(user_id)"><img class="pull-left img-circle" ng-src="{{user_img}}" id="user-image" height="40" width="40"></a><div class="row"><h5 class="capitalize post-info-text" id="user-name"><b>{{user_name}}</b></h5></div> </div><div class="row"><div class="col-xs-10 col-md-11 post-comment-div"><textarea class="post-info-text" placeholder="comment on this post" id="user-comment-text" ng-model="acomment">{{acomment}}</textarea></div> <div class="col-md-12 col-xs-12"><button ng-click="makeComment()" id="post-btn"><img src="img/post.png" height="30" width="30"> post</button></div></div></div></div>'+d),n},b=function(){l=r+'<button class="learn-more-btn" ng-click="showThisPost()">learn more</button>'},w=function(t){return t!==!1&&void 0!==t&&null!==t&&""!==t?!0:!1},x=function(s,l,f,x){function D(){if(s.content){if($.isEmptyObject(s.content.comments)===!1){s.comments=[];var e=0;1===s.content.comments.length&&(e=1),s.content.comments.length>=2&&(e=2);for(var n=0;e>n;n++){w(s.content.comments_user_info[n].picture_url)===!1?s.content.comments_user_info[n].picture_url="img/default.png":s.content.comments[n].user_id===k.id&&(s.content.comments_user_info[n].picture_url=k.picture_url);var i=$.extend(s.content.comments[n],s.content.comments_user_info[n]);s.comments.push(i)}h()}else d="";null!=s.content.question&&""!==s.content.question&&(1==s.content.user_question_help.status?s.helpful_img="img/helpful.png":s.helpful_img="img/upvote.png",null!==s.content.question_interaction&&""!==s.content.question_interaction?(s.helpful_count=parseInt(s.content.question_interaction.helpful_count),s.share_count=parseInt(s.content.question_interaction.share_count),s.views_count=parseInt(s.content.question_interaction.views_count),s.comment_count=parseInt(s.content.question_interaction.comment_count)):(s.helpful_count=0,s.share_count=0,s.views_count=0,s.comment_count=0),null!==s.content.subject.icon_url&&""!==s.content.subject.icon_url&&(s.subject_img=s.content.subject.icon_url),null!==s.content.subject.name&&""!==s.content.subject.name&&(s.subject_name=s.content.subject.name),s.content.question.question&&(q(s.content.question.question,".png")?(s.image_question="images/SSCE/"+s.subject_name+"/QuestionImages"+s.content.question.question,s.is_image_question=!0):(s.is_image_question=!1,q(s.content.question.question,"?")?s.question="<b>"+s.content.question.question+" </b>":s.question="<b>"+s.content.question.question+"? </b>")),null!==s.content.question.optionA&&""!==s.content.question.optionA&&(s.optionA="<b>A.</b> "+s.content.question.optionA),null!==s.content.question.optionB&&""!==s.content.question.optionB&&(s.optionB="<b>B.</b> "+s.content.question.optionB),null!==s.content.question.optionC&&""!==s.content.question.optionC&&(s.optionC="<b>C.</b> "+s.content.question.optionC),null!==s.content.question.optionD&&""!==s.content.question.optionD&&(s.optionD="<b>D.</b> "+s.content.question.optionD),null!==s.content.question.explanation&&""!==s.content.question.explanation&&(q(s.content.question.explanation,".png")?(r="",b()):(s.content.question.explanation.length>60?s.explanation="<b>"+s.content.question.explanation.substring(0,55)+"....":s.explanation=s.content.question.explanation+"</b>",r='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',b())),s.subject_color="rgb("+s.content.subject.color+")"),null!==s.content.question.image&&""!==s.content.question.image?(g=_,s.question_image=s.content.question.image):g=p,""!==s.content.discussion&&null!=s.content.discussion&&(s.discussion=s.content.discussion.discussion,s.discussion_id=s.content.discussion.discussion_id,s.discussion_user_id=s.content.discussion.user_id),m=a.getUser(),m.picture_url?s.user_img=m.picture_url:s.user_img="img/default.png",s.user_name=m.firstname+" "+m.lastname,s.user_id=m.id,s.user_comment="",void 0!==s.content.owner&&(1===s.content.owner?(s.owner_image=s.llh_img,s.owner_name="Team Geniuses"):(s.content.owner.picture_url?s.content.owner.id===m.id?s.owner_image=s.user_img:s.owner_image=s.content.owner.picture_url:s.owner_image="img/default.png",s.owner_name=s.content.owner.firstname+" "+s.content.owner.lastname),s.created=s.content.datecreated),l.html(v(s.content.question,s.content.discussion)),t(l.contents())(s)}}s.acomment="",s.helpful_count=0,s.share_count=0;var k=a.getUser(),C=!1;s.llh_img="img/GeniusesLogo.png",s.showProfile=function(t){e.go("user",{id:t})};var j=function(){var t=u.getStorageValue("posts");t[s.index].question_interaction.share_count=parseInt(t[s.index].question_interaction.share_count)+1,u.setStorageValue("posts",[]),u.setStorageValue("posts",t)},E=function(){var t=u.getStorageValue("posts");t[s.index].question_interaction.views_count=parseInt(t[s.index].question_interaction.views_count)+1,u.setStorageValue("posts",[]),u.setStorageValue("posts",t)},I=function(){i.setViewCount(s.content.postid),i.send().then(function(t){o.check(t.data)&&(t.data.data===!1?(s.views_count-=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)-1):t.data.data===!0&&E())},function(t){s.views_count-=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)-1})},S=function(){var t=u.getStorageValue("posts");t[s.index].question_interaction.helpful_count=parseInt(t[s.index].question_interaction.helpful_count)+1,t[s.index].user_question_help.status=1,u.setStorageValue("posts",[]),u.setStorageValue("posts",t)};s.incrementHelpful=function(){var t=s.content.user_question_help.status;1==t||t===!0||(s.helpful_count+=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)+1,s.content.user_question_help.status=1,s.helpful_img="img/helpful.png",i.setHelpful(s.content.postid,"I"),i.send().then(function(t){o.check(t.data)&&(t.data.data===!1&&(s.helpful_count-=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)-1,s.content.user_question_help.status=0,s.helpful_img="img/upvote.png"),t.data.data===!0&&S())},function(t){s.helpful_count-=1,s.content.question_interaction.helpful_count=parseInt(s.content.question_interaction.helpful_count)-1,s.content.user_question_help.status=0,s.helpful_img="img/upvote.png"}))},s.incrementShare=function(){s.share_count+=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)+1,s.showshare({pid:s.content.postid,subject:s.content.question.subject,question:s.content.question.question}),i.setShareCount(s.content.postid),i.send().then(function(t){o.check(t.data)&&(t.data.data===!1&&(s.share_count-=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)-1),t.data.data===!0&&j())},function(t){s.share_count-=1,s.content.question_interaction.share_count=parseInt(s.content.question_interaction.share_count)-1})},s.current_editted_id=-1,s.isEdittedClicked=!1,s.edited_comment="",s.setEdittedClicked=function(t,e,n){s.current_editted_id=n,s.edited_comment=e,s.isEdittedClicked=t},s.unsetEdittedClicked=function(){s.current_editted_id=-1,s.edited_comment="",s.isEdittedClicked=!1},s.submitEditted=function(t,e){t!=s.content.comments[s.current_editted_id].comment&&i.setEditComment(e,t)&&i.send().then(function(e){o.check(e.data)===!0&&e.data.data===!0&&(s.content.comments[s.current_editted_id].comment=t,D())},function(t){})["finally"](function(){s.current_editted_id=-1,s.edited_comment="",s.isEdittedClicked=!1})},s.isEditClicked=!1,s.editted_discussion="",s.setEditClicked=function(t){s.isEditClicked=!0,s.editted_discussion=t},s.unsetEditClicked=function(){s.isEditClicked=!1,s.editted_discussion=""},s.submitEdit=function(t,e){t!=s.content.discussion.discussion&&i.setEditDiscussion(e,t)&&i.send().then(function(e){o.check(e.data)===!0&&e.data.data===!0&&(s.content.discussion.discussion=t,D())},function(t){})["finally"](function(){s.isEditClicked=!1,s.editted_discussion=""})},s.makeComment=function(){var t=s.content.postid,n=null,c="";1==s.content.owner?(n=1,c="L"):(n=s.content.owner.id,c="S");var l="S",r=s.acomment;a.isLoggedIn()===!0?s.acomment&&C===!1&&(s.comment_count+=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)+1,i.setmakeComment(t,n,c,l,r)&&(C=!0,i.send().then(function(t){if(t.data.data&&o.check(t.data)===!0){s.content.comments?s.content.comments.splice(0,0,t.data.data):s.content.comments[0]=t.data.data,null!=s.content.comments_user_info?s.content.comments_user_info.splice(0,0,{firstname:k.firstname,lastname:k.lastname,picture_url:k.picture_url}):(s.content.comments_user_info=new Array,s.content.comments_user_info[0]={firstname:k.firstname,lastname:k.lastname,picture_url:k.picture_url});var e=u.getStorageValue("posts");e[s.index].comments=[],e[s.index].comments_user_info=[],e[s.index].comments=s.content.comments,e[s.index].comments_user_info=s.content.comments_user_info,u.setStorageValue("posts",[]),u.setStorageValue("posts",e),D(),s.acomment=""}else s.comment_count-=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)-1;C=!1},function(t){s.comment_count-=1,s.content.question_interaction.comment_count=parseInt(s.content.question_interaction.comment_count)-1,C=!1}))):e.go("login")},s.showThisPost=function(){s.views_count+=1,s.content.question_interaction.views_count=parseInt(s.content.question_interaction.views_count)+1,c.sendData(s.content,s.index,"Single"),s.showpost({id:s.index}),I()},s.getHtml=function(t){return n.trustAsHtml(t)},s.$watch("content",function(){if(s.content){var e=a.getUser();if($.isEmptyObject(s.content.comments)===!1){s.comments=[];var n=0;1==s.content.comments.length&&(n=1),s.content.comments.length>=2&&(n=2);for(var i=0;n>i;i++){w(s.content.comments_user_info[i].picture_url)===!1?s.content.comments_user_info[i].picture_url="img/default.png":s.content.comments[i].user_id===e.id&&(s.content.comments_user_info[i].picture_url=e.picture_url);var o=$.extend(s.content.comments[i],s.content.comments_user_info[i]);s.comments.push(o)}h()}else d="";null!=s.content.question&&""!=s.content.question&&(1==s.content.user_question_help.status?s.helpful_img="img/helpful.png":s.helpful_img="img/upvote.png",null!=s.content.question_interaction&&""!=s.content.question_interaction?(s.helpful_count=parseInt(s.content.question_interaction.helpful_count),s.share_count=parseInt(s.content.question_interaction.share_count),s.views_count=parseInt(s.content.question_interaction.views_count),s.comment_count=parseInt(s.content.question_interaction.comment_count)):(s.helpful_count=0,s.share_count=0,s.views_count=0,s.comment_count=0),null!=s.content.subject.icon_url&&""!=s.content.subject.icon_url&&(s.subject_img=s.content.subject.icon_url),null!=s.content.subject.name&&""!=s.content.subject.name&&(s.subject_name=s.content.subject.name),s.content.question.question&&(q(s.content.question.question,".png")?(s.image_question="images/SSCE/"+s.subject_name+"/QuestionImages"+s.content.question.question,s.is_image_question=!0):(s.is_image_question=!1,q(s.content.question.question,"?")?s.question="<b>"+s.content.question.question+" </b>":s.question="<b>"+s.content.question.question+"? </b>")),null!=s.content.question.optionA&&""!=s.content.question.optionA&&(s.optionA="<b>A.</b> "+s.content.question.optionA),null!=s.content.question.optionB&&""!=s.content.question.optionB&&(s.optionB="<b>B.</b> "+s.content.question.optionB),null!=s.content.question.optionC&&""!=s.content.question.optionC&&(s.optionC="<b>C.</b> "+s.content.question.optionC),null!=s.content.question.optionD&&""!=s.content.question.optionD&&(s.optionD="<b>D.</b> "+s.content.question.optionD),null!=s.content.question.explanation&&""!=s.content.question.explanation&&(q(s.content.question.explanation,".png")?(r="",b()):(s.content.question.explanation.length>60?s.explanation="<b>"+s.content.question.explanation.substring(0,55)+"....":s.explanation=s.content.question.explanation+"</b>",r='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',b())),s.subject_color="rgb("+s.content.subject.color+")"),w(s.content.question.image)?(g=_,s.question_image=s.content.question.image):g=p,""!=s.content.discussion&&null!=s.content.discussion&&(s.discussion=s.content.discussion.discussion,s.discussion_id=s.content.discussion.discussion_id,s.discussion_user_id=s.content.discussion.user_id),m=a.getUser(),m.picture_url?s.user_img=m.picture_url:s.user_img="img/default.png",s.user_name=m.firstname+" "+m.lastname,s.user_id=m.id,s.user_comment="",void 0!=s.content.owner&&(1==s.content.owner?(s.owner_image=s.llh_img,s.owner_name="Team Geniuses"):(s.content.owner.picture_url?s.content.owner.id==m.id?s.owner_image=s.user_img:s.owner_image=s.content.owner.picture_url:s.owner_image="img/default.png",s.owner_name=s.content.owner.firstname+" "+s.content.owner.lastname),s.created=s.content.datecreated);var c=v(s.content.question,s.content.discussion);l.html(c),t(l.contents())(s)}})};return{restrict:"EAC",link:x,scope:{content:"=",showpost:"&",index:"@",showshare:"&"},controller:["$scope","$element",function(e,n){e.$on("postchange",function(){if(e.index==c.getId()&&"All"==c.getTo()){var i=u.getStorageValue("posts");e.content=i[e.index];var o=a.getUser();if($.isEmptyObject(e.content.comments)===!1){e.comments=[];var s=0;1==e.content.comments.length&&(s=1),e.content.comments.length>=2&&(s=2);for(var l=0;s>l;l++){w(e.content.comments_user_info[l].picture_url)===!1?e.content.comments_user_info[l].picture_url="img/default.png":e.content.comments[l].user_id==o.id&&(e.content.comments_user_info[l].picture_url=o.picture_url);var f=$.extend(e.content.comments[l],e.content.comments_user_info[l]);e.comments.push(f)}h()}else d="";null!=e.content.question&&""!=e.content.question&&(1==e.content.user_question_help.status?e.helpful_img="img/helpful.png":e.helpful_img="img/upvote.png",null!=e.content.question_interaction&&""!=e.content.question_interaction?(e.helpful_count=parseInt(e.content.question_interaction.helpful_count),e.share_count=parseInt(e.content.question_interaction.share_count),e.views_count=parseInt(e.content.question_interaction.views_count),e.comment_count=parseInt(e.content.question_interaction.comment_count)):(e.helpful_count=0,e.share_count=0,e.views_count=0,e.comment_count=0),null!=e.content.subject.icon_url&&""!=e.content.subject.icon_url&&(e.subject_img=e.content.subject.icon_url),null!=e.content.subject.name&&""!=e.content.subject.name&&(e.subject_name=e.content.subject.name),e.content.question.question&&(q(e.content.question.question,".png")?(e.image_question="images/SSCE/"+e.subject_name+"/QuestionImages"+e.content.question.question,e.is_image_question=!0):(e.is_image_question=!1,q(e.content.question.question,"?")?e.question="<b>"+e.content.question.question+" </b>":e.question="<b>"+e.content.question.question+"? </b>")),null!=e.content.question.optionA&&""!=e.content.question.optionA&&(e.optionA="<b>A.</b> "+e.content.question.optionA),null!=e.content.question.optionB&&""!=e.content.question.optionB&&(e.optionB="<b>B.</b> "+e.content.question.optionB),null!=e.content.question.optionC&&""!=e.content.question.optionC&&(e.optionC="<b>C.</b> "+e.content.question.optionC),null!=e.content.question.optionD&&""!=e.content.question.optionD&&(e.optionD="<b>D.</b> "+e.content.question.optionD),null!=e.content.question.explanation&&""!=e.content.question.explanation&&(q(e.content.question.explanation,".png")?(r="",b()):(e.content.question.explanation.length>60?e.explanation="<b>"+e.content.question.explanation.substring(0,55)+"....":e.explanation=e.content.question.explanation+"</b>",r='<h5 class="post-info-text" ng-bind-html="getHtml(explanation)" id="explanation-text"></h5>',b())),e.subject_color="rgb("+e.content.subject.color+")"),w(e.content.question.image)?(g=_,e.question_image=e.content.question.image):g=p,""!=e.content.discussion&&null!=e.content.discussion&&(e.discussion=e.content.discussion.discussion,e.discussion_id=e.content.discussion.discussion_id,e.discussion_user_id=e.content.discussion.user_id),m=a.getUser(),m.picture_url?e.user_img=m.picture_url:e.user_img="img/default.png",e.user_name=m.firstname+" "+m.lastname,e.user_id=m.id,e.user_comment="",void 0!=e.content.owner&&(1==e.content.owner?(e.owner_image=e.llh_img,e.owner_name="Team LLH"):(e.content.owner.picture_url?e.content.owner.id==m.id?e.owner_image=e.user_img:e.owner_image=e.content.owner.picture_url:e.owner_image="img/default.png",e.owner_name=e.content.owner.firstname+" "+e.content.owner.lastname),e.created=e.content.datecreated);var x=v(e.content.question,e.content.discussion);n.html(x),t(n.contents())(e)}})}]}}]);